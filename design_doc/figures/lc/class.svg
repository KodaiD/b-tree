<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="723px" preserveAspectRatio="none" style="width:994px;height:723px;background:#FFFFFF;" version="1.1" viewBox="0 0 994 723" width="994px" zoomAndPan="magnify"><defs><filter height="300%" id="fsm30hhx4eds8" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[55fb5d3105acf664b4bd3e6da11459b5]
class BplusTree--><rect codeLine="2" fill="#FEFECE" filter="url(#fsm30hhx4eds8)" height="235.2656" id="BplusTree" style="stroke:#A80036;stroke-width:1.5;" width="214" x="7" y="265.03"/><ellipse cx="78.75" cy="281.03" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M81.7188,286.6706 Q81.1406,286.9675 80.5,287.1081 Q79.8594,287.2644 79.1563,287.2644 Q76.6563,287.2644 75.3281,285.6238 Q74.0156,283.9675 74.0156,280.8425 Q74.0156,277.7175 75.3281,276.0613 Q76.6563,274.405 79.1563,274.405 Q79.8594,274.405 80.5,274.5613 Q81.1563,274.7175 81.7188,275.0144 L81.7188,277.7331 Q81.0938,277.155 80.5,276.8894 Q79.9063,276.6081 79.2813,276.6081 Q77.9375,276.6081 77.25,277.6863 Q76.5625,278.7488 76.5625,280.8425 Q76.5625,282.9363 77.25,284.0144 Q77.9375,285.0769 79.2813,285.0769 Q79.9063,285.0769 80.5,284.8113 Q81.0938,284.53 81.7188,283.9519 L81.7188,286.6706 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="62" x="99.25" y="285.1843">BplusTree</text><line style="stroke:#A80036;stroke-width:1.5;" x1="8" x2="220" y1="297.03" y2="297.03"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="305.03"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="86" x="27" y="311.2404">root_ : Node_t*</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="317.8347"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="163" x="27" y="324.0451">kExpectedTreeHeight : size_t</text><line style="stroke:#A80036;stroke-width:1.0;" x1="8" x2="220" y1="330.6394" y2="330.6394"/><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="355.4441"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="188" x="27" y="361.6545">SearchLearfNode() : NodeStack_t</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="368.2488"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="183" x="27" y="374.4592">SearchLeftmostLeaf() : Node_t *</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="381.0534"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="68" x="27" y="387.2639">Split() : void</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="393.8581"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="78" x="27" y="400.0686">Merge() : void</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="8" x2="69.5" y1="345.0417" y2="345.0417"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="89" x="69.5" y="348.3498">Utility Functions</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="158.5" x2="220" y1="345.0417" y2="345.0417"/><ellipse cx="18" cy="426.4675" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="92" x="27" y="429.6779">Read() : payload</text><ellipse cx="18" cy="439.2722" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="129" x="27" y="442.4826">Scan() : RecordIterator</text><ellipse cx="18" cy="452.0769" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="114" x="27" y="455.2873">Write() : ReturnCode</text><ellipse cx="18" cy="464.8816" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="119" x="27" y="468.092">Insert() : ReturnCode</text><ellipse cx="18" cy="477.6863" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="126" x="27" y="480.8967">Update() : ReturnCode</text><ellipse cx="18" cy="490.4909" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="122" x="27" y="493.7014">Delete() : ReturnCode</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="8" x2="102" y1="413.0652" y2="413.0652"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="24" x="102" y="416.3733">APIs</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="126" x2="220" y1="413.0652" y2="413.0652"/><!--MD5=[3fee75583bb7a64f68d843a3c9534ab3]
class Node--><rect codeLine="20" fill="#FEFECE" filter="url(#fsm30hhx4eds8)" height="653.0156" id="Node" style="stroke:#A80036;stroke-width:1.5;" width="274" x="473" y="56.03"/><ellipse cx="589.25" cy="72.03" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M592.2188,77.6706 Q591.6406,77.9675 591,78.1081 Q590.3594,78.2644 589.6563,78.2644 Q587.1563,78.2644 585.8281,76.6237 Q584.5156,74.9675 584.5156,71.8425 Q584.5156,68.7175 585.8281,67.0612 Q587.1563,65.405 589.6563,65.405 Q590.3594,65.405 591,65.5612 Q591.6563,65.7175 592.2188,66.0144 L592.2188,68.7331 Q591.5938,68.155 591,67.8894 Q590.4063,67.6081 589.7813,67.6081 Q588.4375,67.6081 587.75,68.6862 Q587.0625,69.7487 587.0625,71.8425 Q587.0625,73.9362 587.75,75.0144 Q588.4375,76.0769 589.7813,76.0769 Q590.4063,76.0769 591,75.8112 Q591.5938,75.53 592.2188,74.9519 L592.2188,77.6706 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="33" x="609.75" y="76.1843">Node</text><line style="stroke:#A80036;stroke-width:1.5;" x1="474" x2="746" y1="88.03" y2="88.03"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="481" y="96.03"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="100" x="493" y="102.2404">is_leaf_ : uint16_t</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="481" y="108.8347"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="137" x="493" y="115.0451">record_count_ : uint16_t</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="481" y="121.6394"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="120" x="493" y="127.8498">block_size_ : uint16_t</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="481" y="134.4441"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="133" x="493" y="140.6545">deleted_size_ : uint16_t</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="481" y="147.2487"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="91" x="493" y="153.4592">is_lock_ : mutex</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="481" y="160.0534"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="87" x="493" y="166.2639">next_ : Node_t*</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="481" y="172.8581"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="129" x="493" y="179.0686">high_meta_ : Metadata</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="481" y="185.6628"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="143" x="493" y="191.8733">meta_array_ : Metadata[]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="474" x2="746" y1="198.4675" y2="198.4675"/><ellipse cx="484" cy="226.2722" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="129" x="493" y="229.4826">IsRangeInclude() : bool</text><ellipse cx="484" cy="239.0769" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="101" x="493" y="242.2873">CanMerge() : bool</text><ellipse cx="484" cy="251.8816" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="78" x="493" y="255.092">IsLeaf() : bool</text><ellipse cx="484" cy="264.6863" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="144" x="493" y="267.8967">GetRecordCount() : size_t</text><ellipse cx="484" cy="277.4909" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="139" x="493" y="280.7014">GetNextNode() : Node_t*</text><ellipse cx="484" cy="290.2956" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="145" x="493" y="293.5061">GetMetaData() : Metadata</text><ellipse cx="484" cy="303.1003" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="79" x="493" y="306.3108">GetKey() : key</text><ellipse cx="484" cy="315.905" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="104" x="493" y="319.1154">GetHighKey() : key</text><ellipse cx="484" cy="328.7097" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="128" x="493" y="331.9201">GetPayload() : payload</text><ellipse cx="484" cy="341.5144" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="190" x="493" y="344.7248">GetRecord() : pair&lt;key, payload&gt;</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="474" x2="588.5" y1="212.8698" y2="212.8698"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="43" x="588.5" y="216.1779">Getters</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="631.5" x2="746" y1="212.8698" y2="212.8698"/><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="481" y="368.1238"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="82" x="493" y="374.3342">SetKey() : void</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="481" y="380.9284"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="106" x="493" y="387.1389">SetPayload() : void</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="474" x2="589" y1="357.7214" y2="357.7214"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="42" x="589" y="361.0295">Setters</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="631" x2="746" y1="357.7214" y2="357.7214"/><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="481" y="410.5378"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="119" x="493" y="416.7483">GetKeyAddr() : void *</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="481" y="423.3425"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="143" x="493" y="429.5529">GetPayloadAddr() : void *</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="481" y="436.1472"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="124" x="493" y="442.3576">IsRightmostOf() : bool</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="481" y="448.9519"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="97" x="493" y="455.1623">SetData() : size_t</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="481" y="461.7566"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="178" x="493" y="467.967">GetSpaceStatus() : ReturnCode</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="481" y="474.5613"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="129" x="493" y="480.7717">CopyKeyFrom() : size_t</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="481" y="487.3659"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="154" x="493" y="493.5764">CopyHighKeyFrom() : size_t</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="481" y="500.1706"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="139" x="493" y="506.3811">CopyRecordFrom() : void</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="481" y="512.9753"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="155" x="493" y="519.1858">CopyRecordsFrom() : size_t</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="474" x2="565.5" y1="400.1355" y2="400.1355"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="89" x="565.5" y="403.4436">Utility Functions</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="654.5" x2="746" y1="400.1355" y2="400.1355"/><ellipse cx="484" cy="545.5847" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="245" x="493" y="548.7951">SearchRecord() : pair&lt;ReturnCode, size_t&gt;</text><ellipse cx="484" cy="558.3894" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="120" x="493" y="561.5998">SearchChild() : size_t</text><ellipse cx="484" cy="571.1941" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="248" x="493" y="574.4045">SearchEndPositionFor() : pair&lt;bool, size_t&gt;</text><ellipse cx="484" cy="583.9988" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="114" x="493" y="587.2092">Read() : ReturnCode</text><ellipse cx="484" cy="596.8034" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="114" x="493" y="600.0139">Write() : ReturnCode</text><ellipse cx="484" cy="609.6081" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="119" x="493" y="612.8186">Insert() : ReturnCode</text><ellipse cx="484" cy="622.4128" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="126" x="493" y="625.6233">Update() : ReturnCode</text><ellipse cx="484" cy="635.2175" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="122" x="493" y="638.4279">Delete() : ReturnCode</text><ellipse cx="484" cy="648.0222" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="147" x="493" y="651.2326">InsertChild() : ReturnCode</text><ellipse cx="484" cy="660.8269" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="150" x="493" y="664.0373">DeleteChild() : ReturnCode</text><ellipse cx="484" cy="673.6316" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="110" x="493" y="676.842">Consolidate() : void</text><ellipse cx="484" cy="686.4363" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="68" x="493" y="689.6467">Split() : void</text><ellipse cx="484" cy="699.2409" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="78" x="493" y="702.4514">Merge() : void</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="474" x2="598" y1="532.1823" y2="532.1823"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="24" x="598" y="535.4904">APIs</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="622" x2="746" y1="532.1823" y2="532.1823"/><!--MD5=[7d2c4ae7970c32f414f93e7b18676929]
class Metadata--><rect codeLine="70" fill="#FEFECE" filter="url(#fsm30hhx4eds8)" height="209.6563" id="Metadata" style="stroke:#A80036;stroke-width:1.5;" width="180" x="800" y="277.53"/><ellipse cx="855.75" cy="293.53" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M858.7188,299.1706 Q858.1406,299.4675 857.5,299.6081 Q856.8594,299.7644 856.1563,299.7644 Q853.6563,299.7644 852.3281,298.1238 Q851.0156,296.4675 851.0156,293.3425 Q851.0156,290.2175 852.3281,288.5613 Q853.6563,286.905 856.1563,286.905 Q856.8594,286.905 857.5,287.0613 Q858.1563,287.2175 858.7188,287.5144 L858.7188,290.2331 Q858.0938,289.655 857.5,289.3894 Q856.9063,289.1081 856.2813,289.1081 Q854.9375,289.1081 854.25,290.1863 Q853.5625,291.2488 853.5625,293.3425 Q853.5625,295.4363 854.25,296.5144 Q854.9375,297.5769 856.2813,297.5769 Q856.9063,297.5769 857.5,297.3113 Q858.0938,297.03 858.7188,296.4519 L858.7188,299.1706 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="60" x="876.25" y="297.6843">Metadata</text><line style="stroke:#A80036;stroke-width:1.5;" x1="801" x2="979" y1="309.53" y2="309.53"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="808" y="317.53"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="96" x="820" y="323.7404">offset_ : uint32_t</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="808" y="330.3347"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="119" x="820" y="336.5451">key_length_: uint32_t</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="808" y="343.1394"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="125" x="820" y="349.3498">total_length_: uint32_t</text><line style="stroke:#A80036;stroke-width:1.0;" x1="801" x2="979" y1="355.9441" y2="355.9441"/><ellipse cx="811" cy="383.7488" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="107" x="820" y="386.9592">GetOffset() : size_t</text><ellipse cx="811" cy="396.5534" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="130" x="820" y="399.7639">GetKeyLength() : size_t</text><ellipse cx="811" cy="409.3581" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="138" x="820" y="412.5686">GetTotalLength() : size_t</text><ellipse cx="811" cy="422.1628" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="154" x="820" y="425.3733">GetPayloadLength() : size_t</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="801" x2="868.5" y1="370.3464" y2="370.3464"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="43" x="868.5" y="373.6545">Getters</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="911.5" x2="979" y1="370.3464" y2="370.3464"/><ellipse cx="811" cy="451.7722" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="97" x="820" y="454.9826">SetOffset() : void</text><ellipse cx="811" cy="464.5769" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="120" x="820" y="467.7873">SetKeyLength() : void</text><ellipse cx="811" cy="477.3816" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="124" x="820" y="480.592">SetTotalLength(): void</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="801" x2="869" y1="438.3698" y2="438.3698"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="42" x="869" y="441.6779">Setters</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="911" x2="979" y1="438.3698" y2="438.3698"/><!--MD5=[b15da4c01a4fc70c285fc86d71ef3bc1]
class RecordIterator--><rect codeLine="86" fill="#FEFECE" filter="url(#fsm30hhx4eds8)" height="209.6563" id="RecordIterator" style="stroke:#A80036;stroke-width:1.5;" width="181" x="256.5" y="277.53"/><ellipse cx="297.6" cy="293.53" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M300.5688,299.1706 Q299.9906,299.4675 299.35,299.6081 Q298.7094,299.7644 298.0063,299.7644 Q295.5063,299.7644 294.1781,298.1238 Q292.8656,296.4675 292.8656,293.3425 Q292.8656,290.2175 294.1781,288.5613 Q295.5063,286.905 298.0063,286.905 Q298.7094,286.905 299.35,287.0613 Q300.0063,287.2175 300.5688,287.5144 L300.5688,290.2331 Q299.9438,289.655 299.35,289.3894 Q298.7563,289.1081 298.1313,289.1081 Q296.7875,289.1081 296.1,290.1863 Q295.4125,291.2488 295.4125,293.3425 Q295.4125,295.4363 296.1,296.5144 Q296.7875,297.5769 298.1313,297.5769 Q298.7563,297.5769 299.35,297.3113 Q299.9438,297.03 300.5688,296.4519 L300.5688,299.1706 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="91" x="317.4" y="297.6843">RecordIterator</text><line style="stroke:#A80036;stroke-width:1.5;" x1="257.5" x2="436.5" y1="309.53" y2="309.53"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="264.5" y="317.53"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="91" x="276.5" y="323.7404">node_ : Node_t*</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="264.5" y="330.3347"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="124" x="276.5" y="336.5451">record_count_ : size_t</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="264.5" y="343.1394"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="118" x="276.5" y="349.3498">current_pos_ : size_t</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="264.5" y="355.9441"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="155" x="276.5" y="362.1545">end_key_ : pair&lt;key, bool&gt;</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="264.5" y="368.7488"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="79" x="276.5" y="374.9592">is_end_ : bool</text><line style="stroke:#A80036;stroke-width:1.0;" x1="257.5" x2="436.5" y1="381.5534" y2="381.5534"/><ellipse cx="267.5" cy="409.3581" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="137" x="276.5" y="412.5686">*() : pair&lt;key, payload&gt;</text><ellipse cx="267.5" cy="422.1628" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="61" x="276.5" y="425.3733">++() : void</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="257.5" x2="319" y1="395.9558" y2="395.9558"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="56" x="319" y="399.2639">operators</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="375" x2="436.5" y1="395.9558" y2="395.9558"/><ellipse cx="267.5" cy="451.7722" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="91" x="276.5" y="454.9826">HasNext() : bool</text><ellipse cx="267.5" cy="464.5769" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="79" x="276.5" y="467.7873">GetKey() : key</text><ellipse cx="267.5" cy="477.3816" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="128" x="276.5" y="480.592">GetPayload() : payload</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="257.5" x2="325.5" y1="438.3698" y2="438.3698"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="43" x="325.5" y="441.6779">Getters</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="368.5" x2="436.5" y1="438.3698" y2="438.3698"/><!--MD5=[d72cd7b9f3854d48e1b540dd2b38231c]
link BplusTree to Node--><path codeLine="102" d="M124.17,264.98 C138.59,180.66 173.27,73.83 256.5,26.03 C291.38,6 402.62,6 437.5,26.03 C450.62,33.57 462.77,42.45 474,52.38 " fill="none" id="BplusTree-to-Node" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="477.77,55.78,473.7562,46.7861,474.0535,52.4352,468.4045,52.7325,477.77,55.78" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="116.5653" y="254.0316">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="466.5771" y="45.0143">1</text><!--MD5=[1a2d2e6c58a5698430ca9e43fbf9816d]
link Node to Metadata--><path codeLine="103" d="M747.27,382.53 C763.04,382.53 778.82,382.53 794.6,382.53 " fill="none" id="Node-to-Metadata" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="799.95,382.53,790.95,378.53,794.95,382.53,790.95,386.53,799.95,382.53" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="754.9957" y="379.1899">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="783.8676" y="378.9728">1</text><!--MD5=[fb7add3d04029a548e9a9a347d9aecd1]
link Node to Node--><path codeLine="104" d="M747.3,271.34 C767.98,288.48 782,325.54 782,382.53 C782,435.95 769.68,471.87 751.1,490.27 " fill="none" id="Node-to-Node" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="747.3,493.72,756.659,490.6526,751.0094,490.3673,751.2947,484.7176,747.3,493.72" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="755.0273" y="261.9192">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="16" x="754.792" y="496.1364">0..</text><!--MD5=[ff25ba72b4478c0d22f6633328b047f8]
link RecordIterator to Node--><path codeLine="105" d="M437.66,382.53 C447.6,382.53 457.54,382.53 467.47,382.53 " fill="none" id="RecordIterator-to-Node" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="472.67,382.53,463.67,378.53,467.67,382.53,463.67,386.53,472.67,382.53" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="445.499" y="378.9955">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="456.941" y="379.1899">1</text><!--MD5=[f2a284eb8e3eb15c93cfe63fac0fdad9]
@startuml

class BplusTree{
  -root_ : Node_t*
  -kExpectedTreeHeight : size_t
- -
.. Utility Functions ..
  -SearchLearfNode() : NodeStack_t
  -SearchLeftmostLeaf() : Node_t *
  -Split() : void
  -Merge() : void
.. APIs ..
  +Read() : payload
  +Scan() : RecordIterator
  +Write() : ReturnCode
  +Insert() : ReturnCode
  +Update() : ReturnCode
  +Delete() : ReturnCode
}

class Node{
  -is_leaf_ : uint16_t
  -record_count_ : uint16_t
  -block_size_ : uint16_t
  -deleted_size_ : uint16_t
  -is_lock_ : mutex
  -next_ : Node_t*
  -high_meta_ : Metadata
  -meta_array_ : Metadata[]
- -
.. Getters ..
  +IsRangeInclude() : bool
  +CanMerge() : bool
  +IsLeaf() : bool
  +GetRecordCount() : size_t
  +GetNextNode() : Node_t*
  +GetMetaData() : Metadata
  +GetKey() : key
  +GetHighKey() : key
  +GetPayload() : payload
  +GetRecord() : pair<key, payload>
.. Setters ..
  -SetKey() : void
  -SetPayload() : void
.. Utility Functions ..
  -GetKeyAddr() : void *
  -GetPayloadAddr() : void *
  -IsRightmostOf() : bool
  -SetData() : size_t
  -GetSpaceStatus() : ReturnCode
  -CopyKeyFrom() : size_t
  -CopyHighKeyFrom() : size_t
  -CopyRecordFrom() : void
  -CopyRecordsFrom() : size_t
.. APIs ..
  +SearchRecord() : pair<ReturnCode, size_t>
  +SearchChild() : size_t
  +SearchEndPositionFor() : pair<bool, size_t>
  +Read() : ReturnCode
  +Write() : ReturnCode
  +Insert() : ReturnCode
  +Update() : ReturnCode
  +Delete() : ReturnCode
  +InsertChild() : ReturnCode
  +DeleteChild() : ReturnCode
  +Consolidate() : void
  +Split() : void
  +Merge() : void
}

class Metadata{
  -offset_ : uint32_t
  -key_length_: uint32_t
  -total_length_: uint32_t
- -
.. Getters ..
  +GetOffset() : size_t
  +GetKeyLength() : size_t
  +GetTotalLength() : size_t
  +GetPayloadLength() : size_t
.. Setters ..
  +SetOffset() : void
  +SetKeyLength() : void
  +SetTotalLength(): void
}

class RecordIterator{
  -node_ : Node_t*
  -record_count_ : size_t
  -current_pos_ : size_t
  -end_key_ : pair<key, bool>
  -is_end_ : bool
- -
.. operators ..
  + *() : pair<key, payload>
  + ++() : void
.. Getters ..
  +HasNext() : bool
  +GetKey() : key
  +GetPayload() : payload
}

BplusTree "1" -> "1" Node
Node "1" -> "1" Metadata
Node "1" -> "0.." Node
RecordIterator "1" -> "1" Node

@enduml

PlantUML version 1.2022.0(Wed Jan 12 01:16:42 JST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>